// loader
let loader = document.getElementById('loader') 
setTimeout(()=>{
    loader.classList.add("hidden");
    typewriter();
},4000)


// Typing effect
function typing(text){
    return text
}
let aText = typing("Welcome sir, I am J.A.R.V.I.S!")

    let iSpeed = 100; // time delay of print out
    let iIndex = 0; // start printing array at this posision
    let iArrLength = aText.length; // the length of the text array
    let iTextPos = 0; // initialise text position
    
    function typewriter()
    {
     let sContents =  '';
     let iRow =0;
     let destination = document.getElementById("typedtext");
     
     while ( iRow < iIndex ) {
      sContents += aText[iRow++];
     }
     destination.innerHTML = sContents + aText[iIndex].substring(0, iTextPos) + '|';
     if ( iTextPos++ == iArrLength ) {
      iTextPos = 0;
      iIndex++;
      if ( iIndex != aText.length ) {
       iArrLength = aText[iIndex].length;
       setTimeout("typewriter()", iSpeed);
      }
     } else {
      typewriter()
     }
    }
 
    let button=document.getElementById("button");
    let buttontext=document.getElementById("btn");
    buttontext.innerHTML="Start ";
    flag=false


// speech to text   
var speechRecognizer = new webkitSpeechRecognition();
let res='';
function startConverting () {
if('webkitSpeechRecognition' in window) {
    
    speechRecognizer.continuous = true;
    speechRecognizer.interimResults = true;
    speechRecognizer.lang = 'en-US';
    speechRecognizer.start();

    var finalTranscripts = '';

    speechRecognizer.onresult = function(event) {
        var interimTranscripts = '';
        for(var i = event.resultIndex; i < event.results.length; i++){
            var transcript = event.results[i][0].transcript;
            transcript.replace("\n", "<br>");
            if(event.results[i].isFinal) {
                finalTranscripts += transcript;
            }else{
                interimTranscripts += transcript;
            }
        }
        res=(finalTranscripts + interimTranscripts);
        console.log(res)
        if (flag){
            buttontext.innerHTML="Start ";
            speechRecognizer.stop();
            flag=false;
            right.innerHTML='';
        }
        else{
            buttontext.innerHTML="Stop ";
            flag=true;
            if(!(res===undefined || res===null))
            {
                
                right.innerHTML=res;
                return right.innerHTML;
            }
        }
        
    };
    speechRecognizer.onerror = function (event) {
        console.error(event);
    };
}else {
    alert('Your browser is not supported. Please download Google chrome or Update your Google chrome!!');
}
} 


let right=document.getElementById('right');

    
// button

































// speech to text   
var result = document.getElementById('result');
  
function startConverting () {

if('webkitSpeechRecognition' in window) {
    var speechRecognizer = new webkitSpeechRecognition();
    speechRecognizer.continuous = true;
    speechRecognizer.interimResults = true;
    speechRecognizer.lang = 'en-US';
    speechRecognizer.start();

    var finalTranscripts = '';

    speechRecognizer.onresult = function(event) {
        var interimTranscripts = '';
        for(var i = event.resultIndex; i < event.results.length; i++){
            var transcript = event.results[i][0].transcript;
            transcript.replace("\n", "<br>");
            if(event.results[i].isFinal) {
                finalTranscripts += transcript;
            }else{
                interimTranscripts += transcript;
            }
        }
        console.log( finalTranscripts + '<span style="color: #999">' + interimTranscripts + '</span>');
        
    };
    speechRecognizer.onerror = function (event) {

    };
}else {
    alert('Your browser is not supported. Please download Google chrome or Update your Google chrome!!');
}	
} 

    
// Button
let button=document.getElementById("button");
    let buttontext=document.getElementById("btn");
    buttontext.innerHTML="Start ";
    flag=false

function Start(){
    if (flag){
        buttontext.innerHTML="Start ";
        startConverting();
        flag=false;
    }
    else{
        buttontext.innerHTML="Stop ";
        flag=true;
        
    }
}